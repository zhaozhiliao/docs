# 配置指南

本文档详细介绍 QuickNote 的所有配置选项。

## ⚙️ 通用设置

### 快捷键配置

QuickNote 支持自定义所有快捷键。

**默认快捷键:**

| 功能 | 默认快捷键 | 说明 |
|------|-----------|------|
| 快速输入 | `⌘K` | 打开笔记输入窗口 |
| 查看总结 | `⌘S` | 打开总结查看窗口 |
| 保存笔记 | `⌘Enter` | 在快速输入窗口中保存 |

**修改快捷键:**

1. 打开设置 → **通用** 标签页
2. 找到"快捷键设置"部分
3. 点击要修改的快捷键
4. 按下新的组合键
5. 自动保存

**支持的修饰键:**
- `⌘` Command
- `⌥` Option
- `⌃` Control
- `⇧` Shift

**注意事项:**
- 避免与系统快捷键冲突
- 建议使用 Command 组合键
- 快捷键会立即生效

### 存储设置

配置笔记和总结的存储位置。

**默认路径:**
```
笔记: ~/Documents/QuickNote/Notes
总结: ~/Documents/QuickNote/Summaries
```

**修改路径:**

1. 打开设置 → **通用** 标签页
2. 找到"存储设置"部分
3. 点击"选择文件夹"按钮
4. 选择新的存储位置
5. 点击"确定"

**路径要求:**
- 必须是有效的文件夹路径
- 需要有读写权限
- 建议使用绝对路径

**迁移数据:**

如果修改了存储路径，需要手动迁移现有数据：

```bash
# 复制笔记
cp -r ~/Documents/QuickNote/Notes /新路径/Notes

# 复制总结
cp -r ~/Documents/QuickNote/Summaries /新路径/Summaries
```

### 提醒设置

配置系统通知行为。

**总结完成提醒:**
- 开启后，总结生成完成会发送系统通知
- 包含成功和失败两种状态
- 点击通知可打开总结窗口

**配置方式:**
1. 打开设置 → **通用** 标签页
2. 找到"提醒设置"部分
3. 使用开关启用/禁用通知

**系统权限:**

首次使用需要授予通知权限：
- QuickNote 会自动请求权限
- 在系统弹窗中点击"允许"
- 如需修改，前往：系统设置 → 通知 → QuickNote

### 外观设置

选择应用主题。

**主题选项:**
- **浅色**: 适合白天使用
- **深色**: 适合夜间使用，保护视力
- **跟随系统**: 自动跟随 macOS 系统主题

**配置方式:**
1. 打开设置 → **通用** 标签页
2. 在"外观设置"中选择主题
3. 立即生效

## 📄 文件设置

### 元数据配置

为总结文件添加自定义元数据。

**预设字段:**

| 字段 | 类型 | 说明 | 可删除 |
|------|------|------|--------|
| `title` | 文本 | 总结标题 | 可启用/禁用 |
| `documentCreatedDate` | 日期 | 创建时间 | 必需 |
| `aiModel` | 文本 | AI 模型 | 可启用/禁用 |

**添加自定义字段:**

1. 打开设置 → **文件** 标签页
2. 在"元数据项"部分点击"+"
3. 输入字段名和默认值
4. 点击"添加"

**编辑字段:**
- 点击字段名可编辑
- 点击值可修改默认值
- 使用开关启用/禁用字段
- 点击"-"删除自定义字段

**字段值类型:**
- 固定文本：直接输入值
- 日期模板：使用 `{{yyyy-MM-dd}}` 等变量
- 自动填充：留空，由系统自动填充（如 aiModel）

**示例配置:**

```yaml
# 基础字段
title: {{yyyy-MM-dd}} 总结
documentCreatedDate: yyyy-MM-dd HH:mm:ss
aiModel: (自动填充)

# 自定义字段
tags: 日常, 工作
category: 笔记
author: 张三
project: QuickNote
```

### 日期模板变量

在 `title` 字段中可使用日期变量：

| 变量 | 输出 | 示例 |
|------|------|------|
| `{{yyyy}}` | 四位年份 | 2026 |
| `{{MM}}` | 两位月份 | 01 |
| `{{dd}}` | 两位日期 | 19 |
| `{{HH}}` | 两位小时 | 23 |
| `{{mm}}` | 两位分钟 | 30 |
| `{{yyyy-MM-dd}}` | 完整日期 | 2026-01-19 |

**组合使用:**
```
{{yyyy}}年{{MM}}月{{dd}}日总结
→ 2026年01月19日总结

Week {{yyyy}}-W{{MM}}
→ Week 2026-W01
```

## 🤖 AI 设置

### AI 提供商配置

QuickNote 支持多种 AI 服务。

**OpenAI 配置:**

1. 选择提供商：**OpenAI**
2. 输入 API Key
   - 从 https://platform.openai.com/api-keys 获取
3. 选择模型：
   - `gpt-4`: 最强大，适合复杂总结
   - `gpt-4-turbo`: 性价比高
   - `gpt-3.5-turbo`: 快速且便宜
4. 可选：自定义 API 地址（使用代理时）

**Anthropic 配置:**

1. 选择提供商：**Anthropic**
2. 输入 API Key
   - 从 https://console.anthropic.com/ 获取
3. 选择模型：
   - `claude-3-opus`: 最强大
   - `claude-3-sonnet`: 平衡性能
   - `claude-3-haiku`: 快速响应

**自定义 API 配置:**

1. 选择提供商：**自定义**
2. 输入 API 地址
   - 必须兼容 OpenAI API 格式
3. 输入 API Key
4. 输入模型名称

**测试配置:**

配置完成后，建议测试：
1. 记录几条测试笔记
2. 手动生成总结
3. 检查是否成功生成

### API Key 管理

**安全存储:**
- API Key 存储在系统 Keychain 中
- 不会明文保存在配置文件
- 应用卸载后会自动清除

**更换 API Key:**
1. 打开设置 → AI 标签页
2. 清空当前 API Key
3. 输入新的 API Key
4. 自动保存

**删除 API Key:**
1. 清空 API Key 输入框
2. 保存设置
3. AI 功能将被禁用

## 📝 Prompt 管理

### 总结模板配置

自定义 AI 总结的提示词。

**默认模板结构:**

```
系统约束（固定部分）
+
用户自定义规则
```

**编辑模板:**

1. 打开设置 → **Prompt** 标签页
2. 在"提示词模板"中编辑
3. 使用 `{{content}}` 插入笔记内容
4. 点击"保存"

**可用变量:**

| 变量 | 说明 | 示例 |
|------|------|------|
| `{{content}}` | 笔记内容 | 今天学习了... |
| `{{date}}` | 日期 | 2026-01-19 |
| `{{count}}` | 笔记数量 | 15 |

**示例模板:**

```markdown
请分析以下 {{count}} 条笔记，生成一份结构化总结：

{{content}}

要求：
1. 提取核心要点（3-5条）
2. 整理待办事项
3. 识别重要链接和资源
4. 提供洞察和建议

输出格式：
# 核心要点
- ...

# 待办事项
- [ ] ...

# 资源链接
- ...

# 洞察建议
...
```

### 模板库

QuickNote 内置多个模板供选择：

**待办提取模板:**
- 专注于任务识别
- 按优先级分类
- 识别截止日期

**洞察归纳模板:**
- 提取核心想法
- 发现知识联系
- 生成学习建议

**切换模板:**
1. 打开设置 → Prompt 标签页
2. 点击"模板库"
3. 选择想要的模板
4. 点击"应用"

### 定时总结配置

设置每日自动总结的时间。

**配置方式:**
1. 打开设置 → Prompt 标签页
2. 在"定时总结"部分设置时间
3. 格式：HH:mm（24小时制）
4. 默认：23:30

**工作原理:**
- QuickNote 在后台运行
- 到达设定时间自动触发
- 收集当天所有笔记
- 调用 AI 生成总结
- 发送完成通知

## 🌐 Webhook 配置

### 添加 Webhook

**基本配置:**

1. 打开设置 → **Webhook** 标签页
2. 点击"添加 Webhook"
3. 填写基本信息：
   - **名称**: Webhook 标识（如"Notion 数据库"）
   - **URL**: 接收地址
   - **方法**: POST/PUT/PATCH
   - **用途描述**: 用于 AI 路由（可选）

**请求头配置:**

点击"添加请求头"：
```
Authorization: Bearer YOUR_TOKEN
Content-Type: application/json
Notion-Version: 2022-06-28
```

**请求体模板:**

使用 JSON 格式，支持变量：

```json
{
  "title": "{{title}}",
  "content": "{{content}}",
  "date": "{{date}}",
  "noteCount": {{noteCount}},
  "wordCount": {{wordCount}}
}
```

**可用变量:**

| 变量 | 说明 | 类型 |
|------|------|------|
| `{{title}}` | 总结标题 | 字符串 |
| `{{content}}` | 总结内容 | 字符串 |
| `{{date}}` | 日期 | 字符串 |
| `{{noteCount}}` | 笔记数 | 数字 |
| `{{wordCount}}` | 字数 | 数字 |

### 发送模式配置

QuickNote 支持两种发送模式：

**全文发送:**
- 将完整总结发送到所有 Webhook
- 适合备份、存档场景
- 配置简单，直接发送

**AI 智能分析:**
- AI 分析总结内容
- 根据用途描述智能路由
- 每个 Webhook 只接收相关内容
- 需要配置 AI 服务

**选择模式:**
1. 打开设置 → Webhook 标签页
2. 在"发送模式"中选择
3. 保存设置

### AI 路由规则

使用 AI 智能分析模式时的配置。

**用途描述:**

为每个 Webhook 添加清晰的用途描述：

```
好的描述：
- "保存工作相关的任务、进展和会议记录"
- "记录技术学习笔记、代码片段和文章链接"
- "收集创意想法、灵感和项目规划"

不好的描述：
- "Notion"（太模糊）
- "备份"（不明确）
```

**自定义规则:**

在"AI 路由自定义规则"中添加额外指导：

```markdown
分析规则：
1. 工作相关内容发送到"工作 Webhook"
2. 学习笔记发送到"学习 Webhook"
3. 个人想法发送到"个人 Webhook"

特殊处理：
- 包含"紧急"的内容优先发送
- 代码片段必须发送到技术 Webhook
```

### Webhook 测试

配置完成后建议测试：

1. 点击 Webhook 旁的"测试"按钮
2. QuickNote 会发送测试数据
3. 检查接收端是否收到
4. 查看响应状态和错误信息

**测试数据示例:**
```json
{
  "title": "测试总结",
  "content": "这是一条测试消息",
  "date": "2026-01-19",
  "noteCount": 1,
  "wordCount": 10
}
```

## 📊 统计设置

统计功能默认开启，无需额外配置。

**查看统计:**
1. 打开设置 → **统计** 标签页
2. 查看各项数据

**统计内容:**
- 笔记统计
- 总结统计
- AI 使用统计
- Webhook 统计
- 年度热力图

**数据重置:**

如需重置统计数据：
1. 删除日志文件：
   ```bash
   rm ~/Library/Application\ Support/QuickNote/logs/*
   ```
2. 重启 QuickNote

## 🔧 高级配置

### 配置文件位置

QuickNote 的配置文件位于：
```
~/Library/Application Support/QuickNote/settings.json
```

**手动编辑:**

可以直接编辑 JSON 文件（需谨慎）：

```bash
# 备份配置
cp ~/Library/Application\ Support/QuickNote/settings.json ~/settings-backup.json

# 编辑配置
open ~/Library/Application\ Support/QuickNote/settings.json
```

**配置迁移:**

在新设备上恢复配置：

```bash
# 复制配置文件
cp settings.json ~/Library/Application\ Support/QuickNote/

# 重启 QuickNote
```

### 重置所有设置

如需恢复默认设置：

```bash
# 删除配置文件
rm ~/Library/Application\ Support/QuickNote/settings.json

# 重启 QuickNote（会自动创建默认配置）
```

**注意:**
- 重置不会删除笔记数据
- API Key 会被清除
- 所有自定义配置会丢失

## 💡 配置建议

### 推荐配置

**日常使用:**
- 快捷键：保持默认
- 存储：使用默认路径或 iCloud
- 主题：跟随系统
- 通知：开启

**AI 总结:**
- 提供商：OpenAI（gpt-4-turbo）或 Anthropic（claude-3-sonnet）
- 定时：23:00-23:30 之间
- 模板：根据需求选择

**Webhook 集成:**
- 模式：AI 智能分析（需要 AI）
- 数量：2-5 个 Webhook
- 用途：明确描述每个用途

### 性能优化

**减少 AI 调用:**
- 使用更便宜的模型（gpt-3.5-turbo）
- 减少总结频率
- 优化 Prompt 长度

**提高响应速度:**
- 使用本地存储路径
- 减少 Webhook 数量
- 关闭不需要的统计

## 🎯 下一步

- 🤖 详细了解 [AI 配置](ai-setup.md)
- 🌐 学习 [Webhook 集成](webhook-guide.md)
- 📝 优化 [Prompt 模板](prompt-optimization.md)
- 💡 查看 [最佳实践](best-practices.md)
