# 功能详解

QuickNote 提供了一套完整的笔记和 AI 总结解决方案。本文档详细介绍所有功能。

## 📝 笔记管理

### 快速输入

QuickNote 的核心功能，让你随时随地记录想法。

**特点:**
- 🚀 全局快捷键 `⌘K` 快速调出
- 💨 轻量级窗口，不干扰当前工作
- ⌨️ 支持 Markdown 语法
- 💾 自动保存时间戳
- 🔍 智能识别代码块、链接、待办事项

**使用场景:**
- 会议记录
- 灵感捕捉
- 代码片段保存
- 待办事项记录
- 学习笔记

**快捷操作:**
- `⌘K`: 打开快速输入
- `⌘Enter`: 保存并关闭
- `Esc`: 取消并关闭

### 笔记历史

查看和管理所有历史笔记。

**功能:**
- 📅 按时间倒序显示
- 🔍 全文搜索
- 🏷️ 标签筛选
- 📊 统计信息（代码块、链接、待办）
- 📄 导出为 Markdown

**查看方式:**
1. 点击菜单栏图标 → "查看历史"
2. 在历史窗口中浏览所有笔记
3. 点击笔记查看详情

### 笔记格式

QuickNote 使用 Markdown 格式存储笔记。

**支持的语法:**
```markdown
# 标题
## 二级标题

**粗体** *斜体* ~~删除线~~

- 无序列表
1. 有序列表
- [ ] 待办事项
- [x] 已完成事项

[链接](https://example.com)

`行内代码`

​```python
# 代码块
def hello():
    print("Hello, QuickNote!")
​```
```

**自动识别:**
- 代码块：用 ``` 包围的内容
- 链接：http:// 或 https:// 开头
- 待办：- [ ] 或 - [x] 格式

## 🤖 AI 智能总结

### 自动总结

QuickNote 可以自动将每天的笔记生成结构化总结。

**工作流程:**
1. 收集当天所有笔记
2. 使用 AI 分析和归纳
3. 生成结构化总结
4. 保存为 Markdown 文件
5. 发送系统通知

**总结内容包括:**
- 📊 统计信息（笔记数、字数、时间跨度）
- 🎯 核心要点提取
- 📋 待办事项整理
- 💡 洞察和建议
- 🏷️ 自动分类

**触发方式:**
- **自动**: 每天指定时间（默认 23:30）
- **手动**: 在总结窗口点击"生成今日总结"

### 总结模板

QuickNote 提供多种总结模板：

**1. 默认模板**
- 全面的日常总结
- 包含统计、要点、待办、洞察

**2. 待办提取模板**
- 专注于任务和待办事项
- 按优先级和类别分组
- 识别截止日期

**3. 洞察归纳模板**
- 提取核心想法和灵感
- 发现知识点之间的联系
- 生成学习建议

**自定义模板:**
1. 打开设置 → Prompt 标签页
2. 编辑提示词模板
3. 使用变量 `{{content}}` 插入笔记内容
4. 保存并测试

### AI 提供商支持

QuickNote 支持多种 AI 服务：

| 提供商 | 模型示例 | 特点 |
|--------|----------|------|
| OpenAI | gpt-4, gpt-3.5-turbo | 通用性强，响应快 |
| Anthropic | claude-3-sonnet, claude-3-opus | 长文本处理优秀 |
| 自定义 | 任何兼容 OpenAI 格式的 API | 灵活性高 |

**配置方法:**
参见 [AI 配置详解](ai-setup.md)

## 🌐 Webhook 集成

### 发送模式

QuickNote 支持两种 Webhook 发送模式：

**1. 全文发送**
- 将总结完整内容发送到 Webhook
- 适合存档、备份场景
- 支持自定义请求模板

**2. AI 智能分析**
- AI 分析总结内容
- 自动路由到合适的 Webhook
- 每个 Webhook 只接收相关内容

### Webhook 配置

**基本设置:**
- 名称：Webhook 的标识
- URL：接收数据的地址
- 方法：POST、PUT、PATCH
- 请求头：自定义 HTTP 头
- 请求体模板：自定义发送格式

**示例配置:**

```json
{
  "name": "Notion 数据库",
  "url": "https://api.notion.com/v1/pages",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer YOUR_TOKEN",
    "Notion-Version": "2022-06-28"
  },
  "body": {
    "parent": { "database_id": "YOUR_DB_ID" },
    "properties": {
      "标题": { "title": [{ "text": { "content": "{{title}}" } }] },
      "内容": { "rich_text": [{ "text": { "content": "{{content}}" } }] }
    }
  }
}
```

### AI 智能路由

当使用"AI 智能分析"模式时：

1. AI 分析总结内容
2. 根据 Webhook 用途描述判断相关性
3. 为每个 Webhook 提取相关内容
4. 分别发送到对应的 Webhook

**用途描述示例:**
- "保存工作相关的任务和进展"
- "记录学习笔记和技术文章"
- "收集灵感和创意想法"

**优势:**
- 自动分类内容
- 减少无关数据
- 提高集成效率

## 📊 统计分析

### 使用统计

QuickNote 提供详细的使用数据分析。

**笔记统计:**
- 📝 总笔记数
- 📅 连续记录天数
- 📈 平均每日笔记数
- 🔥 最长连续记录

**总结统计:**
- 📊 总结生成次数
- ✅ 成功率
- 📝 平均笔记数/总结
- 📏 平均字数/总结

**AI 使用统计:**
- 🤖 总调用次数
- ✅ 成功/失败次数
- 📊 按提供商分组
- 📈 使用趋势

**Webhook 统计:**
- 🌐 总发送次数
- ✅ 成功率
- 📊 按 Webhook 分组
- ⏱️ 平均响应时间

### 年度热力图

可视化展示全年的笔记记录情况。

**特点:**
- 📅 GitHub 风格的热力图
- 🎨 颜色深浅表示活跃度
- 📊 一目了然的年度概览
- 🔍 点击查看具体日期数据

**查看方式:**
1. 打开设置 → 统计标签页
2. 滚动到"年度热力图"部分
3. 查看每天的记录情况

## 🔔 系统通知

### 总结完成通知

当总结生成完成时，QuickNote 会发送系统通知。

**通知内容:**
- ✅ 成功：显示笔记数和字数
- ❌ 失败：显示错误信息

**通知格式:**
```
📝 1月19日 总结已完成
包含 15 条笔记，共 3,240 字
```

**交互:**
- 点击通知：打开总结窗口
- 查看详情：查看完整总结内容

**配置:**
1. 打开设置 → 通用标签页
2. 在"提醒设置"中开启/关闭通知
3. 系统会记住你的选择

### 权限设置

首次使用时需要授予通知权限：

1. QuickNote 请求通知权限
2. 点击"允许"
3. 如果错过，可在系统设置中手动开启：
   - 系统设置 → 通知 → QuickNote
   - 开启"允许通知"

## ⚙️ 元数据管理

### 文件元数据

QuickNote 支持为总结文件添加自定义元数据。

**预设字段:**
- `title`: 总结标题（支持日期模板）
- `documentCreatedDate`: 文档创建时间（必需）
- `aiModel`: 使用的 AI 模型（自动填充）

**自定义字段:**
可以添加任意自定义字段，如：
- `tags`: 标签
- `category`: 分类
- `author`: 作者
- `project`: 项目名称

**元数据格式:**
使用 YAML frontmatter 格式：

```yaml
---
title: 2026-01-19 总结
documentCreatedDate: 2026-01-19 23:30:00
aiModel: gpt-4
tags: 工作, 学习
category: 日常
---

# 总结内容
...
```

**配置方式:**
1. 打开设置 → 文件标签页
2. 在"元数据项"中添加/编辑字段
3. 使用开关启用/禁用字段

### 模板变量

标题字段支持日期模板变量：

| 变量 | 说明 | 示例 |
|------|------|------|
| `{{yyyy}}` | 四位年份 | 2026 |
| `{{MM}}` | 两位月份 | 01 |
| `{{dd}}` | 两位日期 | 19 |
| `{{yyyy-MM-dd}}` | 完整日期 | 2026-01-19 |

**示例:**
- `{{yyyy-MM-dd}} 总结` → `2026-01-19 总结`
- `{{yyyy}}年{{MM}}月总结` → `2026年01月总结`

## 🎨 主题和外观

### 主题切换

QuickNote 支持浅色和深色主题。

**切换方式:**
1. 打开设置 → 通用标签页
2. 在"外观设置"中选择主题
3. 选项：
   - 浅色
   - 深色
   - 跟随系统

**特点:**
- 🎨 精心设计的配色
- 👁️ 保护视力
- 🌓 自动适应系统主题

## 📁 数据管理

### 存储位置

QuickNote 的所有数据都存储在本地。

**默认路径:**
- 笔记：`~/Documents/QuickNote/Notes`
- 总结：`~/Documents/QuickNote/Summaries`
- 设置：`~/Library/Application Support/QuickNote/settings.json`

**文件格式:**
- 笔记：`YYMMDD-HHMMSS.md`
- 总结：`YYYY-MM-DD-summary.md`

**自定义路径:**
1. 打开设置 → 通用标签页
2. 在"存储设置"中修改路径
3. 点击"选择文件夹"浏览

### 数据导出

所有数据都是标准的 Markdown 格式，可以：

- 📄 直接在任何文本编辑器中打开
- 📤 导入到其他笔记应用（Obsidian、Notion 等）
- 🔄 使用 Git 进行版本控制
- ☁️ 同步到云存储（iCloud、Dropbox 等）

### 数据备份

建议定期备份笔记数据：

**方法 1: 手动复制**
```bash
cp -r ~/Documents/QuickNote ~/Backups/QuickNote-$(date +%Y%m%d)
```

**方法 2: 使用 Git**
```bash
cd ~/Documents/QuickNote
git init
git add .
git commit -m "备份笔记"
```

**方法 3: 云同步**
将 QuickNote 文件夹放在 iCloud Drive 或 Dropbox 中

## 🔐 隐私和安全

### 数据隐私

- ✅ 所有笔记数据存储在本地
- ✅ 不会上传到 QuickNote 服务器
- ✅ AI 调用仅发送到你配置的 AI 服务
- ✅ Webhook 仅发送到你配置的地址

### API Key 安全

- 🔒 API Key 存储在系统 Keychain 中
- 🔒 不会明文保存
- 🔒 不会在日志中显示
- 🔒 可以随时删除和更换

### 网络请求

QuickNote 仅在以下情况发起网络请求：

1. 调用 AI API 生成总结
2. 发送 Webhook 通知
3. 检查更新（如果启用）

所有请求都可以在设置中禁用。

## 🎯 下一步

- 📖 查看 [配置指南](configuration.md) 进行详细配置
- 🤖 阅读 [AI 配置详解](ai-setup.md) 设置 AI 服务
- 💡 参考 [最佳实践](best-practices.md) 提高效率
- ❓ 遇到问题查看 [常见问题](faq.md)
